@using MilkTea.Core.ViewModels
@using MilkteaServices.CategoryServices
@inherits LayoutComponentBase
@inject ICategoryService CategoryService

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>3AnhEmMilkTea</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="3AnhEmMilkTea - Trà sữa ngon và chất lượng" name="description">
	<meta content="trà sữa, 3AnhEmMilkTea, trà xanh, trà đen, trà organic" name="keywords">

	<!-- Owl Carousel CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css" />

	<!-- Custom CSS -->
	<link href="/css/style.css" rel="stylesheet">

	<!-- Font Awesome CDN -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
	<!-- Navbar -->
	<div class="navbar">
		<div class="logo">
			<a href="/"><img src="/img/MilkTeaLogo.jpg" alt="Logo"></a>
		</div>

		<div class="nav-links">
			<a href="/">Trang Chủ</a>
			<a href="/gioithieu">Giới Thiệu</a>
			<a href="/sanpham">Sản Phẩm</a>
			<!-- Icon Hồ Sơ Người Dùng -->
			<a href="/hosonguoidung" title="Hồ Sơ Người Dùng" class="user-profile-icon">
				<i class="fas fa-user-circle"></i>
			</a>

			<!-- Dropdown cho chọn trà -->
			<div class="dropdown">
				<button class="dropdown-btn">Danh Mục</button>
				<div class="dropdown-content">
					@if (categories.Any())
					{
						@foreach (var category in categories)
						{
							<a href="/product/@category.CategoryName">@category.CategoryName</a>
						}
					}
				</div>
			</div>

			<!-- Search Box -->
			<div class="search-box">
				<input type="text" @bind="searchQuery" placeholder="Tìm kiếm sản phẩm..." class="search-input" />
				<button @onclick="OnSearch" class="search-btn"><i class="fas fa-search"></i></button>
			</div>

			<!-- Cart Button -->
				<i style="cursor:pointer" onclick="toggleCart()" class="fa-solid fa-cart-shopping"></i>
		</div>
	</div>

	<!-- Body Content -->
	<div class="container">
		@Body
	</div>

	<!-- Footer -->
	<div class="footer">
		<p>© 2025 3AnhEmMilkTea. All Rights Reserved.</p>
	</div>

	<!-- Back to Top Button -->
	<a href="#" class="back-to-top">
		<i class="arrow-up">&#8593;</i>
	</a>

	<div id="cartModal" class="cart-modal">
		<div class="cart-close" onclick="toggleCart()">×</div>
		<div class="cart-header">Giỏ Hàng</div>
		<ul class="cart-items" id="cartItems">
			<!-- Cart items will be dynamically added here -->
		</ul>
	</div>

	<!-- Scripts -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
	<script src="/js/main.js"></script>
</body>
</html>

@code {
	private string searchQuery;
	private IEnumerable<CategoryViewModel> categories;

	protected override void OnInitialized()
	{
		categories = CategoryService.GetAvailableCategories();
	}

	private async Task OnSearch()
	{
		// Implement search functionality here
	}
}
